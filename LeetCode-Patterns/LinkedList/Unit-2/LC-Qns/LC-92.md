```python
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next
class Solution:
    def reverseBetween(self, head: Optional[ListNode], left: int, right: int) -> Optional[ListNode]:
        if(head == None or head.next == None):
            return head

        n = 0
        cur = head
        while cur!=None:
            n += 1
            cur = cur.next
        
        if(left == 1 and right == n):
            cur = head
            prev = None
            while cur != None:
                tmp = cur.next
                cur.next = prev
                prev = cur
                cur = tmp
            return prev

        dummy = ListNode(-1,head)
        lprev = None
        rafter = None
        l = None
        r = None
        i = 0
        cur = dummy
        while cur != None:
            #print(cur.val)
            if(lprev == None and i == left-1):
                lprev = cur
            if(r==None and i==right):
                r = cur
            cur = cur.next
            i += 1
        l = lprev.next
        rafter = r.next
        #print(lprev.val, rafter.val)

        stop = r.next   # this is rafter
        cur = l
        prev = None
        while cur != stop:
            tmp = cur.next
            cur.next = prev
            prev = cur
            cur = tmp
        
        lprev.next = r
        l.next = rafter
        
        return dummy.next
```